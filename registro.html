<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Crear perfil â€” Obrados</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800;900&display=swap');
*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --navy:#0a2540;--navy2:#0f2d4a;--navy3:#1e3a6e;
  --orange:#e8721a;--orange2:#cf6315;
  --white:#ffffff;--muted:#8899bb;--border:#1a3a5e;
}
html{scroll-behavior:smooth;}
body{font-family:'Manrope',sans-serif;background:var(--navy);color:var(--white);min-height:100vh;overflow-x:hidden;}

/* NAV */
nav{position:fixed;top:0;left:0;right:0;z-index:100;padding:0 5%;height:68px;display:flex;align-items:center;justify-content:space-between;background:rgba(10,37,64,0.92);backdrop-filter:blur(12px);border-bottom:1px solid rgba(255,255,255,0.06);}
.logo{display:inline-flex;align-items:center;gap:10px;text-decoration:none;}
.logo-icon{width:36px;height:36px;border-radius:9px;background:var(--orange);display:flex;align-items:center;justify-content:center;}
.logo-name{font-size:1.3rem;font-weight:800;letter-spacing:-0.04em;color:var(--orange);}
.logo-name span{color:var(--white);}
.nav-back{color:var(--muted);font-size:0.88rem;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:6px;text-decoration:none;}
.nav-back:hover{color:var(--white);}

/* HERO */
.page-hero{padding:120px 5% 60px;text-align:center;position:relative;overflow:hidden;}
.page-hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 70% 50% at 50% 30%,rgba(30,58,110,0.4) 0%,transparent 70%);}
.hero-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(255,255,255,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.02) 1px,transparent 1px);background-size:50px 50px;}
.page-hero-content{position:relative;}
.section-tag{display:inline-block;background:rgba(232,114,26,0.1);border:1px solid rgba(232,114,26,0.2);color:var(--orange);padding:4px 14px;border-radius:20px;font-size:0.75rem;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:16px;}
.page-hero h1{font-size:clamp(1.8rem,4vw,2.8rem);font-weight:900;letter-spacing:-0.5px;margin-bottom:12px;}
.page-hero h1 span{color:var(--orange);}
.page-hero p{color:var(--muted);font-size:0.98rem;line-height:1.6;max-width:480px;margin:0 auto;}

/* FORM WRAPPER */
.form-wrapper{max-width:640px;margin:0 auto;padding:0 5% 80px;}

/* STEPS INDICATOR */
.steps-indicator{display:flex;align-items:center;justify-content:center;gap:0;margin-bottom:40px;}
.step-dot{width:36px;height:36px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:0.8rem;font-weight:700;color:var(--muted);background:var(--navy2);position:relative;z-index:1;transition:all 0.3s;}
.step-dot.active{border-color:var(--orange);background:var(--orange);color:#fff;}
.step-dot.done{border-color:rgba(232,114,26,0.4);background:rgba(232,114,26,0.1);color:var(--orange);}
.step-line{height:2px;width:60px;background:var(--border);}
.step-line.done{background:rgba(232,114,26,0.4);}
.steps-labels{display:flex;justify-content:center;gap:0;margin-top:8px;margin-bottom:40px;}
.step-label{font-size:0.72rem;color:var(--muted);font-weight:500;text-align:center;width:36px;/* match dot */}
.step-label.active{color:var(--orange);}

/* FORM CARD */
.form-card{background:var(--navy2);border:1px solid var(--border);border-radius:20px;padding:36px;margin-bottom:16px;}
.form-card h2{font-size:1.1rem;font-weight:800;margin-bottom:6px;}
.form-card .card-sub{color:var(--muted);font-size:0.85rem;margin-bottom:28px;line-height:1.5;}

/* FORM FIELDS */
.field{margin-bottom:20px;}
.field label{display:block;font-size:0.82rem;font-weight:600;color:#a0b4d0;margin-bottom:7px;letter-spacing:0.3px;}
.field input,.field select,.field textarea{
  width:100%;background:rgba(10,37,64,0.6);border:1px solid var(--border);border-radius:10px;
  padding:12px 16px;color:var(--white);font-family:'Manrope',sans-serif;font-size:0.92rem;
  outline:none;transition:border-color 0.2s,box-shadow 0.2s;
}
.field input:focus,.field select:focus,.field textarea:focus{border-color:var(--orange);box-shadow:0 0 0 3px rgba(232,114,26,0.1);}
.field input::placeholder,.field textarea::placeholder{color:#4a6080;}
.field select{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%238899bb' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;}
.field select option{background:#0a2540;}

.field-row{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
@media(max-width:500px){.field-row{grid-template-columns:1fr;}}

/* PHONE PREFIX */
.phone-input{display:flex;gap:8px;}
.phone-prefix{width:90px;flex-shrink:0;}

/* PHOTO UPLOAD */
.photo-upload-area{
  border:2px dashed var(--border);border-radius:12px;padding:28px;text-align:center;
  cursor:pointer;transition:border-color 0.2s,background 0.2s;position:relative;
  display:flex;flex-direction:column;align-items:center;gap:10px;
}
.photo-upload-area:hover{border-color:var(--orange);background:rgba(232,114,26,0.03);}
.photo-upload-area input[type="file"]{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;}
.photo-icon{width:52px;height:52px;border-radius:12px;background:rgba(232,114,26,0.1);border:1px solid rgba(232,114,26,0.2);display:flex;align-items:center;justify-content:center;font-size:1.4rem;}
.photo-upload-area .photo-label{font-size:0.88rem;font-weight:600;color:var(--white);}
.photo-upload-area .photo-sub{font-size:0.75rem;color:var(--muted);}
.photo-preview{display:none;width:80px;height:80px;border-radius:12px;object-fit:cover;border:2px solid var(--orange);}
.photo-name-preview{display:none;font-size:0.78rem;color:var(--orange);font-weight:600;}

/* TERMS */
.terms-row{display:flex;align-items:flex-start;gap:10px;margin-top:4px;}
.terms-row input[type="checkbox"]{width:18px;height:18px;accent-color:var(--orange);flex-shrink:0;margin-top:2px;cursor:pointer;}
.terms-row label{font-size:0.82rem;color:var(--muted);line-height:1.5;cursor:pointer;}
.terms-row a{color:var(--orange);text-decoration:none;}

/* SUBMIT */
.btn-submit{
  width:100%;background:var(--orange);color:#fff;border:none;padding:15px;border-radius:12px;
  font-family:'Manrope',sans-serif;font-weight:700;font-size:1rem;cursor:pointer;
  box-shadow:0 8px 30px rgba(232,114,26,0.3);transition:background 0.2s,transform 0.1s,box-shadow 0.2s;
  display:flex;align-items:center;justify-content:center;gap:10px;
}
.btn-submit:hover{background:var(--orange2);box-shadow:0 10px 40px rgba(232,114,26,0.4);}
.btn-submit:active{transform:scale(0.99);}
.btn-submit:disabled{opacity:0.5;cursor:not-allowed;}
.spinner{width:18px;height:18px;border:2px solid rgba(255,255,255,0.3);border-top-color:#fff;border-radius:50%;animation:spin 0.7s linear infinite;display:none;}
@keyframes spin{to{transform:rotate(360deg);}}

/* INFO BOX */
.info-box{background:rgba(30,58,110,0.3);border:1px solid rgba(30,58,110,0.6);border-radius:12px;padding:14px 16px;display:flex;gap:10px;align-items:flex-start;margin-bottom:20px;}
.info-box .info-icon{font-size:1rem;flex-shrink:0;margin-top:1px;}
.info-box p{font-size:0.8rem;color:var(--muted);line-height:1.5;}

/* SUCCESS */
.success-screen{display:none;text-align:center;padding:60px 20px;}
.success-icon{width:72px;height:72px;border-radius:50%;background:rgba(232,114,26,0.1);border:2px solid var(--orange);display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto 24px;}
.success-screen h2{font-size:1.5rem;font-weight:800;margin-bottom:12px;}
.success-screen p{color:var(--muted);font-size:0.9rem;line-height:1.6;max-width:380px;margin:0 auto 28px;}
.btn-back{display:inline-block;background:var(--orange);color:#fff;padding:12px 28px;border-radius:10px;font-weight:700;font-size:0.9rem;text-decoration:none;cursor:pointer;border:none;font-family:'Manrope',sans-serif;}

/* ERROR */
.field-error{font-size:0.75rem;color:#ff6b6b;margin-top:5px;display:none;}
.field.has-error input,.field.has-error select{border-color:#ff6b6b;}
.field.has-error .field-error{display:block;}
</style>
</head>
<body>

<nav>
  <a href="index.html" class="logo">
    <div class="logo-icon">
      <svg width="22" height="22" viewBox="0 0 40 40" fill="none">
        <circle cx="14" cy="13" r="6" fill="white" opacity="0.6"/>
        <circle cx="26" cy="13" r="6" fill="white"/>
        <path d="M4 34 C4 27 8.5 23 14 23 C17 23 19.5 24.5 21 26.5 C22.5 24.5 25 23 28 23 C33.5 23 37 27 37 34" stroke="white" stroke-width="2.5" fill="none" stroke-linecap="round"/>
      </svg>
    </div>
    <span class="logo-name">Obra<span>dos</span></span>
  </a>
  <a href="index.html" class="nav-back">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
    Volver
  </a>
</nav>

<div class="page-hero">
  <div class="hero-grid"></div>
  <div class="page-hero-content">
    <div class="section-tag">Para profesionales</div>
    <h1>Crea tu perfil en <span>Obrados</span></h1>
    <p>Gratis, sin cuotas iniciales. Empieza a recibir clientes desde hoy.</p>
  </div>
</div>

<div class="form-wrapper">

  <!-- FORM -->
  <div id="formSection">
    <div class="form-card">
      <h2>InformaciÃ³n personal</h2>
      <p class="card-sub">Estos datos aparecerÃ¡n en tu perfil pÃºblico para que los clientes puedan contactarte.</p>

      <div class="info-box">
        <span class="info-icon">ðŸ“§</span>
        <p>Al enviar el formulario recibirÃ¡s un correo de confirmaciÃ³n con los siguientes pasos para activar tu perfil.</p>
      </div>

      <form id="registroForm" novalidate>

        <!-- Nombre y apellidos -->
        <div class="field" id="field-nombre">
          <label for="nombre">Nombre y apellidos *</label>
          <input type="text" id="nombre" name="nombre" placeholder="Ej. Carlos MartÃ­nez GarcÃ­a" autocomplete="name">
          <span class="field-error">Por favor, introduce tu nombre completo.</span>
        </div>

        <!-- Email -->
        <div class="field" id="field-email">
          <label for="email">Correo electrÃ³nico *</label>
          <input type="email" id="email" name="email" placeholder="tu@correo.com" autocomplete="email">
          <span class="field-error">Introduce un correo electrÃ³nico vÃ¡lido.</span>
        </div>

        <!-- TelÃ©fono -->
        <div class="field" id="field-telefono">
          <label for="telefono">TelÃ©fono de contacto *</label>
          <div class="phone-input">
            <select class="phone-prefix" name="prefijo">
              <option value="+34">ðŸ‡ªðŸ‡¸ +34</option>
              <option value="+376">ðŸ‡¦ðŸ‡© +376</option>
              <option value="+54">ðŸ‡¦ðŸ‡· +54</option>
              <option value="+591">ðŸ‡§ðŸ‡´ +591</option>
              <option value="+56">ðŸ‡¨ðŸ‡± +56</option>
              <option value="+57">ðŸ‡¨ðŸ‡´ +57</option>
              <option value="+506">ðŸ‡¨ðŸ‡· +506</option>
              <option value="+593">ðŸ‡ªðŸ‡¨ +593</option>
              <option value="+503">ðŸ‡¸ðŸ‡» +503</option>
              <option value="+502">ðŸ‡¬ðŸ‡¹ +502</option>
              <option value="+504">ðŸ‡­ðŸ‡³ +504</option>
              <option value="+52">ðŸ‡²ðŸ‡½ +52</option>
              <option value="+505">ðŸ‡³ðŸ‡® +505</option>
              <option value="+507">ðŸ‡µðŸ‡¦ +507</option>
              <option value="+595">ðŸ‡µðŸ‡¾ +595</option>
              <option value="+51">ðŸ‡µðŸ‡ª +51</option>
              <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
              <option value="+598">ðŸ‡ºðŸ‡¾ +598</option>
              <option value="+58">ðŸ‡»ðŸ‡ª +58</option>
            </select>
            <input type="tel" id="telefono" name="telefono" placeholder="612 345 678" style="flex:1;" autocomplete="tel">
          </div>
          <span class="field-error">Introduce un nÃºmero de telÃ©fono vÃ¡lido.</span>
        </div>

        <!-- Ciudad y especialidad -->
        <div class="field-row">
          <div class="field" id="field-ciudad">
            <label for="ciudad">Ciudad / Zona de trabajo *</label>
            <input type="text" id="ciudad" name="ciudad" placeholder="Ej. Madrid, Barcelona...">
            <span class="field-error">Indica tu ciudad o zona.</span>
          </div>
          <div class="field" id="field-especialidad">
            <label for="especialidad">Especialidad *</label>
            <select id="especialidad" name="especialidad">
              <option value="" disabled selected>Selecciona...</option>
              <option>AlbaÃ±il</option>
              <option>Electricista</option>
              <option>Fontanero / Plomero</option>
              <option>Pintor</option>
              <option>Carpintero</option>
              <option>Yesero / Escayolista</option>
              <option>Soldador</option>
              <option>Techador / Tejados</option>
              <option>Instalador de suelos</option>
              <option>Cristalero</option>
              <option>Cerrajero</option>
              <option>Reformas integrales</option>
              <option>Otro</option>
            </select>
            <span class="field-error">Selecciona tu especialidad.</span>
          </div>
        </div>

        <!-- Foto de perfil -->
        <div class="field" id="field-foto">
          <label>Foto de perfil</label>
          <div class="photo-upload-area" id="photoArea">
            <input type="file" id="fotoPerfil" name="fotoPerfil" accept="image/*" onchange="handlePhotoChange(this)">
            <div class="photo-icon" id="photoIcon">ðŸ“·</div>
            <img class="photo-preview" id="photoPreview" alt="Vista previa">
            <span class="photo-label" id="photoLabel">Sube una foto de perfil</span>
            <span class="photo-sub" id="photoSub">JPG, PNG o WEBP Â· MÃ¡x. 5 MB</span>
            <span class="photo-name-preview" id="photoNamePreview"></span>
          </div>
        </div>

        <!-- TÃ©rminos -->
        <div class="terms-row">
          <input type="checkbox" id="terminos" name="terminos">
          <label for="terminos">Acepto los <a href="#">TÃ©rminos de uso</a> y la <a href="#">PolÃ­tica de privacidad</a> de Obrados.</label>
        </div>
        <div class="field-error" id="terminos-error" style="display:none;margin-top:6px;">Debes aceptar los tÃ©rminos para continuar.</div>

        <div style="margin-top:28px;">
          <button type="submit" class="btn-submit" id="submitBtn">
            <span id="btnText">Crear mi perfil gratis</span>
            <div class="spinner" id="spinner"></div>
          </button>
        </div>

      </form>
    </div>
  </div>

  <!-- SUCCESS -->
  <div class="success-screen" id="successScreen">
    <div class="success-icon">âœ…</div>
    <h2>Â¡Solicitud enviada!</h2>
    <p>Hemos recibido tu solicitud. En breve recibirÃ¡s un correo en <strong id="emailConfirm"></strong> con los pasos para activar tu perfil en Obrados.</p>
    <a href="index.html" class="btn-back">Volver al inicio</a>
  </div>

</div>

<!-- ===================== FORMSPREE - cambia YOUR_FORM_ID ===================== -->
<script>
function handlePhotoChange(input) {
  const file = input.files[0];
  if (!file) return;
  const preview = document.getElementById('photoPreview');
  const icon = document.getElementById('photoIcon');
  const label = document.getElementById('photoLabel');
  const sub = document.getElementById('photoSub');
  const namePreview = document.getElementById('photoNamePreview');

  const reader = new FileReader();
  reader.onload = e => {
    preview.src = e.target.result;
    preview.style.display = 'block';
    icon.style.display = 'none';
    label.textContent = 'Foto seleccionada';
    sub.style.display = 'none';
    namePreview.textContent = file.name;
    namePreview.style.display = 'block';
  };
  reader.readAsDataURL(file);
}

function validateForm() {
  let valid = true;

  const fields = [
    { id: 'field-nombre', input: 'nombre', check: v => v.trim().length >= 3 },
    { id: 'field-email', input: 'email', check: v => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v) },
    { id: 'field-telefono', input: 'telefono', check: v => /^[\d\s\-\+\(\)]{7,15}$/.test(v.trim()) },
    { id: 'field-ciudad', input: 'ciudad', check: v => v.trim().length >= 2 },
    { id: 'field-especialidad', input: 'especialidad', check: v => v !== '' },
  ];

  fields.forEach(({ id, input, check }) => {
    const el = document.getElementById(id);
    const val = document.getElementById(input).value;
    if (!check(val)) {
      el.classList.add('has-error');
      valid = false;
    } else {
      el.classList.remove('has-error');
    }
  });

  const terminos = document.getElementById('terminos');
  const terminosError = document.getElementById('terminos-error');
  if (!terminos.checked) {
    terminosError.style.display = 'block';
    valid = false;
  } else {
    terminosError.style.display = 'none';
  }

  return valid;
}

document.getElementById('registroForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  if (!validateForm()) return;

  const btn = document.getElementById('submitBtn');
  const btnText = document.getElementById('btnText');
  const spinner = document.getElementById('spinner');

  btn.disabled = true;
  btnText.textContent = 'Enviando...';
  spinner.style.display = 'block';

  const nombre = document.getElementById('nombre').value;
  const email = document.getElementById('email').value;
  const prefijo = document.querySelector('select[name="prefijo"]').value;
  const telefono = document.getElementById('telefono').value;
  const ciudad = document.getElementById('ciudad').value;
  const especialidad = document.getElementById('especialidad').value;

  // -----------------------------------------------------------------------
  // OPCIÃ“N A: Formspree (recomendado â€” gratis hasta 50 envÃ­os/mes)
  // 1. Ve a https://formspree.io y crea una cuenta gratis
  // 2. Crea un nuevo formulario y copia tu ID (ej: xpwzabcd)
  // 3. Reemplaza "YOUR_FORM_ID" con tu ID real
  // -----------------------------------------------------------------------
  const FORMSPREE_ID = 'YOUR_FORM_ID'; // <-- CAMBIA ESTO

  if (FORMSPREE_ID === 'YOUR_FORM_ID') {
    // MODO DEMO: simula envÃ­o sin Formspree
    await new Promise(r => setTimeout(r, 1500));
    mostrarExito(email);
    return;
  }

  try {
    const res = await fetch(`https://formspree.io/f/${FORMSPREE_ID}`, {
      method: 'POST',
      headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },
      body: JSON.stringify({
        nombre,
        email,
        telefono: `${prefijo} ${telefono}`,
        ciudad,
        especialidad,
        _subject: `Nuevo profesional registrado: ${nombre} â€” ${especialidad}`,
        _replyto: email,
      })
    });

    if (res.ok) {
      mostrarExito(email);
    } else {
      throw new Error('Error en el envÃ­o');
    }
  } catch (err) {
    btn.disabled = false;
    btnText.textContent = 'Crear mi perfil gratis';
    spinner.style.display = 'none';
    alert('Hubo un error al enviar el formulario. Por favor, intÃ©ntalo de nuevo.');
  }
});

function mostrarExito(email) {
  document.getElementById('formSection').style.display = 'none';
  document.getElementById('successScreen').style.display = 'block';
  document.getElementById('emailConfirm').textContent = email;
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>

</body>
</html>
